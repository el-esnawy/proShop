(this.webpackJsonpproshop=this.webpackJsonpproshop||[]).push([[6],{151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalButton=void 0;var r=i(n(0)),c=i(n(33)),a=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,l(t).call(this,e))).state={isSdkReady:!1},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,c=n.options,a=n.amount,i=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(c&&c.currency?c.currency:"USD"),value:a.toString()}}],application_context:{shipping_preference:i}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,a=t.onSuccess,i=t.createOrder,o=t.createSubscription,u=t.onApprove,d=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var l=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:c.default}),p=n&&!i?function(t,n){return e.createOrder(t,n)}:function(e,t){return i(e,t)};return r.default.createElement(l,s({},this.props,{createOrder:o?void 0:p,createSubscription:o,onApprove:a?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:d}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,c=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();c.push("".concat(t,"=").concat(n[e]))}));var a=document.createElement("script");a.type="text/javascript",a.src="https://www.paypal.com/sdk/js?".concat(c.join("&")),a.async=!0,a.onload=function(){e.setState({isSdkReady:!0}),r&&r()},a.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(a)}}])&&u(n.prototype,a),i&&u(n,i),t}(r.default.Component);t.PayPalButton=j,f(j,"propTypes",{amount:a.default.oneOfType([a.default.number,a.default.string]),currency:a.default.oneOfType([a.default.number,a.default.string]),shippingPreference:a.default.string,onSuccess:a.default.func,catchError:a.default.func,onError:a.default.func,createOrder:a.default.func,createSubscription:a.default.func,onApprove:a.default.func,style:a.default.object,options:a.default.shape({clientId:a.default.string,merchantId:a.default.string,currency:a.default.oneOfType([a.default.number,a.default.string]),intent:a.default.string,commit:a.default.oneOfType([a.default.bool,a.default.string]),vault:a.default.oneOfType([a.default.bool,a.default.string]),component:a.default.string,disableFunding:a.default.string,disableCard:a.default.string,integrationDate:a.default.string,locale:a.default.string,buyerCountry:a.default.string,debug:a.default.oneOfType([a.default.bool,a.default.string])}),onButtonReady:a.default.func}),f(j,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},157:function(e,t,n){"use strict";n.r(t);var r=n(9),c=n.n(r),a=n(12),i=n(15),o=n(0),s=n(151),u=n(13),d=n.n(u),l=n(14),p=n(135),f=n(71),j=n(149),b=n(142),h=n(148),O=n(85),y=n(11),m=n(72),x=n(10),v=n(24),g=n(19),w=n(1);t.default=function(e){var t=e.match,n=e.history,r=t.params.id,u=Object(y.b)(),S=Object(y.c)((function(e){return e.orderDetails})),P=S.order,k=S.loading,I=S.error,_=Object(y.c)((function(e){return e.userLogin})).userInfo,E=Object(o.useState)(!1),A=Object(i.a)(E,2),D=A[0],T=A[1],R=Object(y.c)((function(e){return e.orderPay})),L=R.loading,C=R.success,M=Object(y.c)((function(e){return e.orderDeliver})),N=M.loading,B=M.success;Object(o.useEffect)((function(){u(Object(m.c)(r))}),[u,r]),Object(o.useEffect)((function(){_||n.push("/login");var e=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/config/paypal");case 2:t=e.sent,n=t.data,(r=document.createElement("script")).type="text/javascript",r.src="https://www.paypal.com/sdk/js?client-id=".concat(n),r.async=!0,r.onload=function(){T(!0)},document.body.appendChild(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!P||C||B?(u({type:x.t}),u({type:x.f}),u(Object(m.c)(r))):P.isPaid||(window.paypal?T(!0):e())}),[u,r,C,P,B,n,_]);return k?Object(w.jsx)(v.a,{}):I?Object(w.jsx)(g.a,{variant:"danger",children:I}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h1",{children:["Order: ",P._id]}),Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{md:8,children:Object(w.jsxs)(j.a,{variant:"flush",children:[Object(w.jsxs)(j.a.Item,{children:[Object(w.jsx)("h2",{children:"Shipping"}),Object(w.jsx)("strong",{children:"Name: "}),P.user.name,Object(w.jsx)("br",{}),Object(w.jsxs)("a",{href:"mailto:".concat(P.user.email),children:["Email: ",P.user.email]}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:"Address: "}),P.shippingAddress.address,", ",P.shippingAddress.city,", ",P.shippingAddress.postalCode,","," ",P.shippingAddress.country]}),P.isDelivered?Object(w.jsxs)(g.a,{variant:"success",children:["Delivered on ",P.deliveredAt]}):Object(w.jsx)(g.a,{variant:"danger",children:"Not Devlivered"})]}),Object(w.jsxs)(j.a.Item,{children:[Object(w.jsx)("h2",{children:" Payment Method"}),Object(w.jsxs)("p",{children:[Object(w.jsx)("strong",{children:" Method: "}),P.paymentMethod]}),P.isPaid?Object(w.jsxs)(g.a,{variant:"success",children:["Paid on ",P.paidAt]}):Object(w.jsx)(g.a,{variant:"danger",children:"Not Paid"})]}),Object(w.jsxs)(j.a.Item,{children:[Object(w.jsx)("h2",{children:"Order Items"}),0===P.orderItems.length?Object(w.jsx)(g.a,{children:"No Order"}):Object(w.jsx)(j.a,{variant:"flush",children:P.orderItems.map((function(e){return Object(w.jsx)(j.a.Item,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{md:1,children:Object(w.jsx)(b.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(w.jsx)(f.a,{children:Object(w.jsx)(l.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(w.jsxs)(f.a,{md:4,children:[e.qty," x\u2002$ ",e.price.toLocaleString("en-US"),Object(w.jsx)("br",{}),Object(w.jsx)("strong",{children:"Total:"}),(e.qty*e.price).toLocaleString("en-US")]})]})},e.product)}))})]})]})}),Object(w.jsx)(f.a,{md:4,children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(j.a,{variant:"flush",children:[Object(w.jsx)(j.a.Item,{children:Object(w.jsx)("h2",{children:"Order Summary"})}),Object(w.jsx)(j.a.Item,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{children:"Items"}),Object(w.jsxs)(f.a,{children:["$ ",Number(P.itemsPrice).toLocaleString("en-US")]})]})}),Object(w.jsx)(j.a.Item,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{children:"Shipping"}),Object(w.jsxs)(f.a,{children:["$ ",Number(P.shippingPrice).toLocaleString("en-US")]})]})}),Object(w.jsx)(j.a.Item,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{children:"Tax"}),Object(w.jsxs)(f.a,{children:["$ ",Number(P.taxPrice).toLocaleString("en-US")]})]})}),Object(w.jsx)(j.a.Item,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(f.a,{children:"Total"}),Object(w.jsxs)(f.a,{children:["$ ",Number(P.totalPrice).toLocaleString("en-US")]})]})}),Object(w.jsx)(j.a.Item,{children:I&&Object(w.jsx)(g.a,{variant:"danger",children:I})}),!P.isPaid&&Object(w.jsxs)(j.a.Item,{children:[L&&Object(w.jsx)(v.a,{}),D?Object(w.jsx)(s.PayPalButton,{amount:P.totalPrice,onSuccess:function(e){u(Object(m.f)(r,e))}}):Object(w.jsx)(v.a,{})]}),N&&Object(w.jsx)(v.a,{}),_&&_.isAdmin&&P.isPaid&&!P.isDelivered&&Object(w.jsx)(j.a.Item,{children:Object(w.jsx)(O.a,{type:"button",className:"btn btn-block",onClick:function(){u(Object(m.b)(P))},children:"Mark As Delivered"})})]})})})]})]})}}}]);
//# sourceMappingURL=6.8a5aebb9.chunk.js.map